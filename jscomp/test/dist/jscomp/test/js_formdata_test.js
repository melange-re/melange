// Generated by Melange
'use strict';

const Caml_option = require("melange.js/caml_option.js");
const Mt = require("./mt.js");
const Stdlib__Option = require("melange/option.js");

function form_data_append(param) {
  const fd = new FormData();
  fd.append("a", "foo");
  fd.append("b", "bar");
  return {
          TAG: /* Eq */0,
          _0: Stdlib__Option.get(Caml_option.null_to_opt(fd.get("a"))),
          _1: "foo"
        };
}

function form_data_not_found(param) {
  const fd = new FormData();
  return {
          TAG: /* Eq */0,
          _0: Caml_option.null_to_opt(fd.get("doesn't exist")),
          _1: undefined
        };
}

function form_data_append_blob(param) {
  const fd = new FormData();
  const blob = new Blob(["hello"].values(), undefined);
  fd.append("b", blob, "foo.txt");
  const got_blob = Stdlib__Option.get(Caml_option.null_to_opt(fd.get("b")));
  return got_blob.text().then(function (x) {
              return Promise.resolve({
                          TAG: /* Eq */0,
                          _0: x,
                          _1: "hello"
                        });
            });
}

function form_data_append_file(param) {
  const fd = new FormData();
  const file = new File(["hello"].values(), "foo.txt", undefined);
  fd.append("b", file, "foo.txt");
  const got_file = Stdlib__Option.get(Caml_option.null_to_opt(fd.get("b")));
  return got_file.text().then(function (x) {
              return Promise.resolve({
                          TAG: /* Eq */0,
                          _0: x,
                          _1: "hello"
                        });
            });
}

Mt.from_pair_suites("Js_formdata_test", {
      hd: [
        "append",
        form_data_append
      ],
      tl: {
        hd: [
          "not found",
          form_data_not_found
        ],
        tl: /* [] */0
      }
    });

Mt.from_promise_suites("Js_formdata_test", {
      hd: [
        "append blob",
        form_data_append_blob(undefined)
      ],
      tl: {
        hd: [
          "append file",
          form_data_append_file(undefined)
        ],
        tl: /* [] */0
      }
    });

exports.form_data_append = form_data_append;
exports.form_data_not_found = form_data_not_found;
exports.form_data_append_blob = form_data_append_blob;
exports.form_data_append_file = form_data_append_file;
/*  Not a pure module */
