// Generated by Melange
'use strict';

const Caml_exceptions = require("melange.js/caml_exceptions.js");
const Caml_js_exceptions = require("melange.js/caml_js_exceptions.js");
const Curry = require("melange.js/curry.js");
const Js__Js_exn = require("melange.js/js_exn.js");
const Mt = require("./mt.js");
const Stdlib = require("melange/stdlib.js");
const Stdlib__List = require("melange/list.js");

const Local = /* @__PURE__ */ Caml_exceptions.create("Exception_raise_test.Local");

const B = /* @__PURE__ */ Caml_exceptions.create("Exception_raise_test.B");

const C = /* @__PURE__ */ Caml_exceptions.create("Exception_raise_test.C");

const D = /* @__PURE__ */ Caml_exceptions.create("Exception_raise_test.D");

function appf(g, x) {
  const A = /* @__PURE__ */ Caml_exceptions.create("A");
  try {
    return Curry._1(g, x);
  }
  catch (raw_exn){
    const exn = Caml_js_exceptions.internalToOCamlException(raw_exn);
    if (exn.MEL_EXN_ID === Local) {
      return 3;
    }
    if (exn.MEL_EXN_ID === Stdlib.Not_found) {
      return 2;
    }
    if (exn.MEL_EXN_ID === A) {
      return 3;
    }
    if (exn.MEL_EXN_ID !== B) {
      if (exn.MEL_EXN_ID === C) {
        return exn._1;
      } else if (exn.MEL_EXN_ID === D) {
        return exn._1[0];
      } else {
        return 4;
      }
    }
    const match = exn._1;
    if (!match) {
      return 4;
    }
    const match$1 = match.tl;
    if (!match$1) {
      return 4;
    }
    const match$2 = match$1.tl;
    if (match$2) {
      return match$2.hd;
    } else {
      return 4;
    }
  }
}

const A = /* @__PURE__ */ Caml_exceptions.create("Exception_raise_test.A");

let f;

try {
  f = (function () {throw (new Error ("x"))} ()
  );
}
catch (raw_x){
  const x = Caml_js_exceptions.internalToOCamlException(raw_x);
  f = x.MEL_EXN_ID === A ? x._1 : 2;
}

let ff;

try {
  ff = (function () {throw 3} ()
  );
}
catch (raw_x$1){
  const x$1 = Caml_js_exceptions.internalToOCamlException(raw_x$1);
  ff = x$1.MEL_EXN_ID === A ? x$1._1 : 2;
}

let fff;

try {
  fff = (function () {throw 2} ()
  );
}
catch (raw_x$2){
  const x$2 = Caml_js_exceptions.internalToOCamlException(raw_x$2);
  fff = x$2.MEL_EXN_ID === A ? x$2._1 : 2;
}

let a0;

try {
  a0 = (function (){throw 2} ()
  );
}
catch (raw_x$3){
  const x$3 = Caml_js_exceptions.internalToOCamlException(raw_x$3);
  if (x$3.MEL_EXN_ID === A || x$3.MEL_EXN_ID === Js__Js_exn.$$Error) {
    a0 = x$3._1;
  } else {
    throw new Caml_js_exceptions.MelangeError("Assert_failure", {
          MEL_EXN_ID: "Assert_failure",
          _1: [
            "jscomp/test/exception_raise_test.ml",
            102,
            9
          ]
        });
  }
}

let a1;

try {
  a1 = (function (){throw 2} ()
  );
}
catch (raw_e){
  a1 = Caml_js_exceptions.internalToOCamlException(raw_e);
}

let a2;

try {
  a2 = (function (){throw (new Error("x"))} ()
  );
}
catch (raw_e$1){
  a2 = Caml_js_exceptions.internalToOCamlException(raw_e$1);
}

const suites = {
  contents: {
    hd: [
      "File \"jscomp/test/exception_raise_test.ml\", line 114, characters 4-11",
      (function (param) {
        return {
          TAG: /* Eq */ 0,
          _0: [
            f,
            ff,
            fff,
            a0
          ],
          _1: [
            2,
            2,
            2,
            2
          ]
        };
      })
    ],
    tl: {
      hd: [
        "File \"jscomp/test/exception_raise_test.ml\", line 116, characters 4-11",
        (function (param) {
          if (a1.MEL_EXN_ID === Js__Js_exn.$$Error) {
            return {
              TAG: /* Eq */ 0,
              _0: a1._1,
              _1: 2
            };
          }
          throw new Caml_js_exceptions.MelangeError("Assert_failure", {
                MEL_EXN_ID: "Assert_failure",
                _1: [
                  "jscomp/test/exception_raise_test.ml",
                  119,
                  15
                ]
              });
        })
      ],
      tl: /* [] */ 0
    }
  }
};

const test_id = {
  contents: 0
};

function eq(loc, x, y) {
  Mt.eq_suites(test_id, suites, loc, x, y);
}

try {
  ((()=>{throw 2}
      )());
}
catch (raw_e$2){
  const e = Caml_js_exceptions.internalToOCamlException(raw_e$2);
  eq("File \"jscomp/test/exception_raise_test.ml\", line 131, characters 7-14", Caml_js_exceptions.caml_as_js_exn(e) !== undefined, true);
}

try {
  throw new Caml_js_exceptions.MelangeError(Stdlib.Not_found, {
        MEL_EXN_ID: Stdlib.Not_found
      });
}
catch (raw_e$3){
  const e$1 = Caml_js_exceptions.internalToOCamlException(raw_e$3);
  eq("File \"jscomp/test/exception_raise_test.ml\", line 138, characters 7-14", Caml_js_exceptions.caml_as_js_exn(e$1) !== undefined, false);
}

function fff0(x, g) {
  let val;
  try {
    val = Curry._1(x, undefined);
  }
  catch (exn){
    return 1;
  }
  return Curry._1(g, undefined);
}

function input_lines(ic, _acc) {
  while (true) {
    const acc = _acc;
    let line;
    try {
      line = Stdlib.input_line(ic);
    }
    catch (exn){
      return Stdlib__List.rev(acc);
    }
    _acc = {
      hd: line,
      tl: acc
    };
    continue;
  };
}

eq("File \"jscomp/test/exception_raise_test.ml\", line 150, characters 5-12", ((a,b,c,_) => a + b + c
      )(1, 2, 3, 4), 6);

Mt.from_pair_suites("Exception_raise_test", suites.contents);

module.exports = {
  Local,
  B,
  C,
  D,
  appf,
  A,
  f,
  ff,
  fff,
  a0,
  a1,
  a2,
  suites,
  test_id,
  eq,
  fff0,
  input_lines,
}
/* f Not a pure module */
