(library
 (name core)
 (wrapped false)
 (flags
  (:standard -w -9-30-50))
 (preprocess
  (action
   (run cppo -U BS_NATIVE_PPX %{env:CPPO_FLAGS=} %{input-file})))
 (modules_without_implementation lam_pass_unused_params lam_runtime)
 (libraries ext common depends outcome_printer js_parser reason
   builtin_datasets))

(rule
 (targets js_fold.ml)
 (deps js_fold.mlp)
 (action
  (run camlp4of -I core -filter map -filter trash -impl %{deps} -printer o -o
    %{targets})))

(rule
 (targets js_map.ml)
 (deps js_map.mlp)
 (action
  (run camlp4of -I core -filter Camlp4FoldGenerator -filter trash -impl
    %{deps} -printer o -o %{targets})))

(copy_files# ../syntax/*)
