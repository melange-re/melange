// Generated by Melange

import * as Caml_array from "melange.js/caml_array.mjs";
import * as Caml_exceptions from "./caml_exceptions.mjs";
import * as Caml_js_exceptions from "melange.js/caml_js_exceptions.mjs";

const caml_methods_cache = Caml_array.make(1000, 0);

function caml_set_oo_id(b) {
  const id = Caml_exceptions.fresh("CamlOO");
  b[1] = id;
  return b;
}

function caml_get_public_method(obj, tag, cacheid) {
  const meths = obj[0];
  const offs = caml_methods_cache[cacheid];
  if (meths[offs] === tag) {
    return meths[offs - 1 | 0];
  }
  const aux = function (_i) {
    while (true) {
      const i = _i;
      if (i < 3) {
        throw new Caml_js_exceptions.MelangeError("Assert_failure", {
            MEL_EXN_ID: "Assert_failure",
            _1: [
              "jscomp/runtime/caml_oo.ml",
              66,
              20
            ]
          });
      }
      if (meths[i] === tag) {
        caml_methods_cache[cacheid] = i;
        return i;
      }
      _i = i - 2 | 0;
      continue;
    };
  };
  return meths[aux((meths[0] << 1) + 1 | 0) - 1 | 0];
}

export {
  caml_get_public_method,
  caml_set_oo_id,
}
/* No side effect */
