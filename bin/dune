(executable
 (public_name melc)
 (package melange)
 (flags :standard -open Melange_compiler_libs)
 (libraries js_parser ext common melange_compiler_libs core cmdliner)
 (modules melc melc_cli)
 (preprocess
  (action
   (run cppo "%{env:CPPO_FLAGS=}" %{input-file}))))

(executable
 (public_name melppx)
 (package melange)
 (modules melppx)
 (libraries melange.ppx ppxlib))

(executable
 (name jsoo_main)
 (modules jsoo_main jsoo_common)
 ; Need to use melange_ppx, not melange_ppx_lib, so Driver.V2.register_transformation runs
 (libraries core melange_compiler_libs melange_ppx)
 (modes js))
