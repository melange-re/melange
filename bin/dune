(executable
 (public_name melc)
 (package melange)
 (flags :standard -open Melange_compiler_libs)
 (libraries js_parser bs_hash_stubs_melange ext common melange_compiler_libs core cmdliner)
 (modules melc melc_cli)
 (preprocess
  (action
   (run cppo "%{env:CPPO_FLAGS=}" %{input-file}))))

(executable
 (public_name melppx)
 (package melange)
 (modules melppx)
 (libraries bs_hash_stubs_melange melange.ppx ppxlib))

(executable
 (name jsoo_main)
 (flags :standard -open Melange_compiler_libs)
 (modules jsoo_main jsoo_common)
 (libraries bs_hash_stubs_native core melange_compiler_libs melange_ppx)
 (modes js))
